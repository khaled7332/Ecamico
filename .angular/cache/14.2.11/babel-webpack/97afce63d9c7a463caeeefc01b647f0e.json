{"ast":null,"code":"'use strict';\n\nconst axios = require('axios');\n\nconst pkg = require('../../package.json');\n\nconst {\n  helpers: {\n    mergeData\n  },\n  classes: {\n    Response,\n    ResponseError\n  }\n} = require('@sendgrid/helpers');\n\nconst API_KEY_PREFIX = 'SG.';\nconst SENDGRID_BASE_URL = 'https://api.sendgrid.com/';\nconst TWILIO_BASE_URL = 'https://email.twilio.com/';\n\nclass Client {\n  constructor() {\n    this.auth = '';\n    this.impersonateSubuser = '';\n    this.defaultHeaders = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      'User-Agent': 'sendgrid/' + pkg.version + ';nodejs'\n    };\n    this.defaultRequest = {\n      baseUrl: SENDGRID_BASE_URL,\n      url: '',\n      method: 'GET',\n      headers: {},\n      maxContentLength: Infinity,\n      // Don't limit the content length.\n      maxBodyLength: Infinity\n    };\n  }\n\n  setApiKey(apiKey) {\n    this.auth = 'Bearer ' + apiKey;\n    this.setDefaultRequest('baseUrl', SENDGRID_BASE_URL);\n\n    if (!this.isValidApiKey(apiKey)) {\n      console.warn(`API key does not start with \"${API_KEY_PREFIX}\".`);\n    }\n  }\n\n  setTwilioEmailAuth(username, password) {\n    const b64Auth = Buffer.from(username + ':' + password).toString('base64');\n    this.auth = 'Basic ' + b64Auth;\n    this.setDefaultRequest('baseUrl', TWILIO_BASE_URL);\n\n    if (!this.isValidTwilioAuth(username, password)) {\n      console.warn('Twilio Email credentials must be non-empty strings.');\n    }\n  }\n\n  isValidApiKey(apiKey) {\n    return this.isString(apiKey) && apiKey.trim().startsWith(API_KEY_PREFIX);\n  }\n\n  isValidTwilioAuth(username, password) {\n    return this.isString(username) && username && this.isString(password) && password;\n  }\n\n  isString(value) {\n    return typeof value === 'string' || value instanceof String;\n  }\n\n  setImpersonateSubuser(subuser) {\n    this.impersonateSubuser = subuser;\n  }\n\n  setDefaultHeader(key, value) {\n    if (key !== null && typeof key === 'object') {\n      // key is an object\n      Object.assign(this.defaultHeaders, key);\n      return this;\n    }\n\n    this.defaultHeaders[key] = value;\n    return this;\n  }\n\n  setDefaultRequest(key, value) {\n    if (key !== null && typeof key === 'object') {\n      // key is an object\n      Object.assign(this.defaultRequest, key);\n      return this;\n    }\n\n    this.defaultRequest[key] = value;\n    return this;\n  }\n\n  createHeaders(data) {\n    // Merge data with default headers.\n    const headers = mergeData(this.defaultHeaders, data); // Add auth, but don't overwrite if header already set.\n\n    if (typeof headers.Authorization === 'undefined' && this.auth) {\n      headers.Authorization = this.auth;\n    }\n\n    if (this.impersonateSubuser) {\n      headers['On-Behalf-Of'] = this.impersonateSubuser;\n    }\n\n    return headers;\n  }\n\n  createRequest(data) {\n    let options = {\n      url: data.uri || data.url,\n      baseUrl: data.baseUrl,\n      method: data.method,\n      data: data.body,\n      params: data.qs,\n      headers: data.headers\n    }; // Merge data with default request.\n\n    options = mergeData(this.defaultRequest, options);\n    options.headers = this.createHeaders(options.headers);\n    options.baseURL = options.baseUrl;\n    delete options.baseUrl;\n    return options;\n  }\n\n  request(data, cb) {\n    data = this.createRequest(data);\n    const promise = new Promise((resolve, reject) => {\n      axios(data).then(response => {\n        return resolve([new Response(response.status, response.data, response.headers), response.data]);\n      }).catch(error => {\n        if (error.response) {\n          if (error.response.status >= 400) {\n            return reject(new ResponseError(error.response));\n          }\n        }\n\n        return reject(error);\n      });\n    }); // Throw an error in case a callback function was not passed.\n\n    if (cb && typeof cb !== 'function') {\n      throw new Error('Callback passed is not a function.');\n    }\n\n    if (cb) {\n      return promise.then(result => cb(null, result)).catch(error => cb(error, null));\n    }\n\n    return promise;\n  }\n\n}\n\nmodule.exports = Client;","map":{"version":3,"names":["axios","require","pkg","helpers","mergeData","classes","Response","ResponseError","API_KEY_PREFIX","SENDGRID_BASE_URL","TWILIO_BASE_URL","Client","constructor","auth","impersonateSubuser","defaultHeaders","Accept","version","defaultRequest","baseUrl","url","method","headers","maxContentLength","Infinity","maxBodyLength","setApiKey","apiKey","setDefaultRequest","isValidApiKey","console","warn","setTwilioEmailAuth","username","password","b64Auth","Buffer","from","toString","isValidTwilioAuth","isString","trim","startsWith","value","String","setImpersonateSubuser","subuser","setDefaultHeader","key","Object","assign","createHeaders","data","Authorization","createRequest","options","uri","body","params","qs","baseURL","request","cb","promise","Promise","resolve","reject","then","response","status","catch","error","Error","result","module","exports"],"sources":["D:/grad project/examico project/Ecamico/node_modules/@sendgrid/client/src/classes/client.js"],"sourcesContent":["'use strict';\nconst axios = require('axios');\nconst pkg = require('../../package.json');\nconst {\n  helpers: {\n    mergeData,\n  },\n  classes: {\n    Response,\n    ResponseError,\n  },\n} = require('@sendgrid/helpers');\n\nconst API_KEY_PREFIX = 'SG.';\nconst SENDGRID_BASE_URL = 'https://api.sendgrid.com/';\nconst TWILIO_BASE_URL = 'https://email.twilio.com/';\n\nclass Client {\n  constructor() {\n    this.auth = '';\n    this.impersonateSubuser = '';\n\n    this.defaultHeaders = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      'User-Agent': 'sendgrid/' + pkg.version + ';nodejs',\n    };\n\n    this.defaultRequest = {\n      baseUrl: SENDGRID_BASE_URL,\n      url: '',\n      method: 'GET',\n      headers: {},\n      maxContentLength: Infinity, // Don't limit the content length.\n      maxBodyLength: Infinity,\n    };\n  }\n\n  setApiKey(apiKey) {\n    this.auth = 'Bearer ' + apiKey;\n    this.setDefaultRequest('baseUrl', SENDGRID_BASE_URL);\n\n    if (!this.isValidApiKey(apiKey)) {\n      console.warn(`API key does not start with \"${API_KEY_PREFIX}\".`);\n    }\n  }\n\n  setTwilioEmailAuth(username, password) {\n    const b64Auth = Buffer.from(username + ':' + password).toString('base64');\n    this.auth = 'Basic ' + b64Auth;\n    this.setDefaultRequest('baseUrl', TWILIO_BASE_URL);\n\n    if (!this.isValidTwilioAuth(username, password)) {\n      console.warn('Twilio Email credentials must be non-empty strings.');\n    }\n  }\n\n  isValidApiKey(apiKey) {\n    return this.isString(apiKey) && apiKey.trim().startsWith(API_KEY_PREFIX);\n  }\n\n  isValidTwilioAuth(username, password) {\n    return this.isString(username) && username\n      && this.isString(password) && password;\n  }\n\n  isString(value) {\n    return typeof value === 'string' || value instanceof String;\n  }\n\n  setImpersonateSubuser(subuser) {\n    this.impersonateSubuser = subuser;\n  }\n\n  setDefaultHeader(key, value) {\n    if (key !== null && typeof key === 'object') {\n      // key is an object\n      Object.assign(this.defaultHeaders, key);\n      return this;\n    }\n\n    this.defaultHeaders[key] = value;\n    return this;\n  }\n\n  setDefaultRequest(key, value) {\n    if (key !== null && typeof key === 'object') {\n      // key is an object\n      Object.assign(this.defaultRequest, key);\n      return this;\n    }\n\n    this.defaultRequest[key] = value;\n    return this;\n  }\n\n  createHeaders(data) {\n    // Merge data with default headers.\n    const headers = mergeData(this.defaultHeaders, data);\n\n    // Add auth, but don't overwrite if header already set.\n    if (typeof headers.Authorization === 'undefined' && this.auth) {\n      headers.Authorization = this.auth;\n    }\n\n    if (this.impersonateSubuser) {\n      headers['On-Behalf-Of'] = this.impersonateSubuser;\n    }\n\n    return headers;\n  }\n\n  createRequest(data) {\n    let options = {\n      url: data.uri || data.url,\n      baseUrl: data.baseUrl,\n      method: data.method,\n      data: data.body,\n      params: data.qs,\n      headers: data.headers,\n    };\n\n    // Merge data with default request.\n    options = mergeData(this.defaultRequest, options);\n    options.headers = this.createHeaders(options.headers);\n    options.baseURL = options.baseUrl;\n    delete options.baseUrl;\n\n    return options;\n  }\n\n  request(data, cb) {\n    data = this.createRequest(data);\n\n    const promise = new Promise((resolve, reject) => {\n      axios(data)\n        .then(response => {\n          return resolve([\n            new Response(response.status, response.data, response.headers),\n            response.data,\n          ]);\n        })\n        .catch(error => {\n          if (error.response) {\n            if (error.response.status >= 400) {\n              return reject(new ResponseError(error.response));\n            }\n          }\n          return reject(error);\n        });\n    });\n\n    // Throw an error in case a callback function was not passed.\n    if (cb && typeof cb !== 'function') {\n      throw new Error('Callback passed is not a function.');\n    }\n\n    if (cb) {\n      return promise\n        .then(result => cb(null, result))\n        .catch(error => cb(error, null));\n    }\n\n    return promise;\n  }\n}\n\nmodule.exports = Client;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}